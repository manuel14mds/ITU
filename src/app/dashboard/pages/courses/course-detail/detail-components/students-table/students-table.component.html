<div *ngIf="loading; else elseBlock">
    <!-- loading -->
    <mat-spinner></mat-spinner>
</div>

<ng-template #elseBlock>
    <button mat-flat-button color="accent" class="addBtn" (click)="openEnrollDialog()">
        Enroll student <mat-icon aria-hidden="false" aria-label="add icon" fontIcon="add"></mat-icon>
    </button>
    
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8 demo-table">
        <!-- DNI Column -->
        <ng-container matColumnDef="dni">
            <th mat-header-cell *matHeaderCellDef> DNI </th>
            <td mat-cell *matCellDef="let element"> {{element.DNI}} </td>
        </ng-container>
    
        <!-- Name Column -->
        <ng-container matColumnDef="fullname">
            <th mat-header-cell *matHeaderCellDef> Fullname</th>
            <td mat-cell *matCellDef="let element"> {{element | fullname}} </td>
        </ng-container>
    
        <!-- Email Column -->
        <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef> Email</th>
            <td mat-cell *matCellDef="let element"> {{element.email}} </td>
        </ng-container>
    
        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let element" class="actions-td"> 
                <button mat-flat-button color="warn" (click)="unerollStudent(element)" [disabled]="userRole !== 'admin'">
                    Unenroll <mat-icon aria-hidden="false" aria-label="delete icon" fontIcon="remove"></mat-icon>
                </button>
            </td>
        </ng-container>
    
    
    
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
    
</ng-template>

